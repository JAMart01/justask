<div class="container-fluid">

    <header class="row">
            {{> navbar }}
    </header>

<div class="container mt-5">
    <div>
        <h1>{{post.title}}</h1>
    </div>
    <div class="d-flex justify-content-center row">
        <div class="col-md-8">
            <div class="d-flex flex-column comment-section">
                <div class="bg-white p-2">
                    <div class="d-flex flex-row user-info be-img-comment"><img class="rounded-circle" id={{post.user.username}} width="40">
                        <div class="d-flex flex-column justify-content-start ml-2"><span class="d-block font-weight-bold name">{{post.user.username}}</span><span class="date text-black-50">Shared publicly - Jan 2020</span></div>
                    </div>
                    <div class="mt-2">
                        <p class="comment-text">{{post.post_text}}</p>
                    </div>
                </div>
                <div class="bg-white">
                    <div class="d-flex flex-row fs-12">
                        {{!-- <div class="like p-2 cursor"><i class="fa fa-thumbs-o-up"></i><span class="ml-1">Like</span></div>
                        <div class="like p-2 cursor"><i class="fa fa-commenting-o"></i><span class="ml-1">Comment</span></div>
                        <div class="like p-2 cursor"><i class="fa fa-share"></i><span class="ml-1">Share</span></div> --}}

                    <button id="like" onclick="liked()">
                        <i class="fa fa-thumbs-up"></i>
                        <span class="icon">Like</span>
                    </button>

                    <button id="dislike" onclick="dislike()">
                        <i class="fa fa-thumbs-down"></i>
                        <span class="icon">Dislike</span>
                    </button>
                    </div>
                </div>

            <div class="bg-light p-2">
            {{> comments post.comments}}
            </div>
                <div class="bg-light p-2">
                    <div class="d-flex flex-row align-items-start"><textarea id="commentBox" class="form-control ml-1 shadow-none textarea"></textarea></div>
                    <div class="mt-2 text-right"><button class="btn btn-secondary btn-sm shadow-none" type="button" id="postCommentBtn">Post comment</button><button class="btn btn-outline-secondary btn-sm ml-1 shadow-none" type="button">Cancel</button></div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<script type="text/javascript">
    async function fetchImage() {
        let image = await fetch('https://ui-avatars.com/api/?name={{post.user.username}}')
            .then(response => response.blob())
            .then(data => {
                return URL.createObjectURL(data);
            });
        document.getElementById("{{post.user.username}}").src = image;
    }
    fetchImage();
</script>
<script src="/javascript/comment.js"></script>
<script src="/javascript/like.js"></script>
